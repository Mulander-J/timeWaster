import{_ as a}from"./CatBtn-caf797fb.js";import{_ as e}from"./TheInput-9951b550.js";import{p as s,j as r,m as n,H as t,k as o,o as m,d as u,e as l,t as i,l as c,g as p,w as d,T as f,f as g}from"./.pnpm-e78b5e43.js";import{u as v}from"./app-8989940e.js";import{_ as j}from"./index-235f4331.js";const _=s({}),h=s({}),y={class:"loginWrapper"},x={class:"text-3xl"},k={class:"text-center"},E={key:0,class:"hint"},D={key:1,class:"hint"},b=j(r({__name:"index",setup(s){const r=n(),j=v(),[b,C]=t(!0),[I,L]=t(!1),M=()=>{C()},O=o((()=>b.value?"Login":"Register")),{formData:U,formErr:w,clearErr:N}=(a=>{const e=()=>{Object.assign(_,a)},s=()=>{Object.assign(h,a)},r=()=>{e(),s()};return r(),{formData:_,formErr:h,initData:r,updateData:a=>{a&&Object.assign(_,a)},clearData:e,clearErr:s}})({username:""}),P=async()=>{if(!I.value){L(!0);try{N();const a=(()=>{const{username:a}=U;return a?{username:a}:!(w.username="Please enter username")})();a&&(j.setUser({username:a.username,sessionId:"SK28NP0"}),r.push("/app"))}catch(a){w.username=(null==a?void 0:a.message)||"Error"}finally{L(!1)}}};return(s,r)=>{const n=e,t=a;return m(),u("div",y,[l("h2",x,i(c(O)),1),p(n,{value:c(U).username,"onUpdate:value":r[0]||(r[0]=a=>c(U).username=a),errMsg:c(w).username,"onUpdate:errMsg":r[1]||(r[1]=a=>c(w).username=a),placeholder:"Enter your name",max:40},null,8,["value","errMsg"]),l("div",k,[p(t,{class:"mb-4",onClick:P},{default:d((()=>[g(i(c(I)?"Loading":"Start"),1)])),_:1}),p(f,{name:"fade",mode:"out-in"},{default:d((()=>[c(b)?(m(),u("div",E,[g("No account yet? "),l("a",{onClick:M},"Register "),g("one~")])):(m(),u("div",D,[g("Already have a account,"),l("a",{onClick:M},"Login "),g("now!")]))])),_:1})])])}}}),[["__scopeId","data-v-9aaf2753"]]);export{b as default};
