import{_ as e}from"./TheInput-48a60911.js";import{x as n,y as t,d as a,z as o,f as l,r as s,b as r,A as i,g as u,o as c,c as d,u as f,e as v,t as p,i as h,w as m,k as g,F as y,l as k,v as w,q as I,s as b,_ as x}from"./index-cfc64c49.js";import{u as E}from"./app-60c8e0e5.js";import{u as C,N as j}from"./mockData-4c78674a.js";var P,_={exports:{}};P=_,function(e){var n,t={},a={16:!1,18:!1,17:!1,91:!1},o="all",l={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},s={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},r=function(e){return s[e]||e.toUpperCase().charCodeAt(0)},i=[];for(n=1;n<20;n++)s["f"+n]=111+n;function u(e,n){for(var t=e.length;t--;)if(e[t]===n)return t;return-1}function c(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}var d={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function f(e){var o,s,r,c,f,h;if(o=e.keyCode,-1==u(i,o)&&i.push(o),93!=o&&224!=o||(o=91),o in a)for(r in a[o]=!0,l)l[r]==o&&(v[r]=!0);else if(function(e){for(n in a)a[n]=e[d[n]]}(e),v.filter.call(this,e)&&o in t)for(h=p(),c=0;c<t[o].length;c++)if((s=t[o][c]).scope==h||"all"==s.scope){for(r in f=s.mods.length>0,a)(!a[r]&&u(s.mods,+r)>-1||a[r]&&-1==u(s.mods,+r))&&(f=!1);(0!=s.mods.length||a[16]||a[18]||a[17]||a[91])&&!f||!1===s.method(e,s)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function v(e,n,a){var o,l;o=h(e),void 0===a&&(a=n,n="all");for(var s=0;s<o.length;s++)l=[],(e=o[s].split("+")).length>1&&(l=m(e),e=[e[e.length-1]]),e=e[0],(e=r(e))in t||(t[e]=[]),t[e].push({shortcut:o[s],scope:n,method:a,key:o[s],mods:l})}for(n in l)v[n]=!1;function p(){return o||"all"}function h(e){var n;return""==(n=(e=e.replace(/\s/g,"")).split(","))[n.length-1]&&(n[n.length-2]+=","),n}function m(e){for(var n=e.slice(0,e.length-1),t=0;t<n.length;t++)n[t]=l[n[t]];return n}function g(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent&&e.attachEvent("on"+n,(function(){t(window.event)}))}g(document,"keydown",(function(e){f(e)})),g(document,"keyup",(function(e){var n,t=e.keyCode,o=u(i,t);if(o>=0&&i.splice(o,1),93!=t&&224!=t||(t=91),t in a)for(n in a[t]=!1,l)l[n]==t&&(v[n]=!1)})),g(window,"focus",(function(){for(n in a)a[n]=!1;for(n in l)v[n]=!1}));var y=e.key;e.key=v,e.key.setScope=function(e){o=e||"all"},e.key.getScope=p,e.key.deleteScope=function(e){var n,a,o;for(n in t)for(a=t[n],o=0;o<a.length;)a[o].scope===e?a.splice(o,1):o++},e.key.filter=function(e){var n=(e.target||e.srcElement).tagName;return!("INPUT"==n||"SELECT"==n||"TEXTAREA"==n)},e.key.isPressed=function(e){return"string"==typeof e&&(e=r(e)),-1!=u(i,e)},e.key.getPressedKeyCodes=function(){return i.slice(0)},e.key.noConflict=function(){var n=e.key;return e.key=y,n},e.key.unbind=function(e,n){var a,o,l,s,i,u=[];for(a=h(e),s=0;s<a.length;s++){if((o=a[s].split("+")).length>1&&(u=m(o),e=o[o.length-1]),e=r(e),void 0===n&&(n=p()),!t[e])return;for(l=0;l<t[e].length;l++)(i=t[e][l]).scope===n&&c(i.mods,u)&&(t[e][l]={})}},P.exports=v}(n);const S=t(_.exports),T={class:"h-full w-full"},V={key:0,class:"row-center h-full w-full"},K=[(e=>(I("data-v-a9a0a1a4"),e=e(),b(),e))((()=>v("div",{class:"text-2xl font-bad font-bold prose prose-stone"},"Space + R | Chat with Random ",-1)))],A={key:1,class:"h-full flex flex-col gap-y-4"},D={class:"grow overflow-overlay h-10px"},L=x(a({__name:"Channel",setup(n){const t=o(),a=l(),I=E(),b=C(),x=s({inputVal:"",chatlogs:[]}),P=r((()=>{var e;return null==(e=t.params)?void 0:e.id})),_=r((()=>{var e;return P.value?P.value===(null==(e=I.user)?void 0:e.sessionId)?I.user:b.findUserById(P.value):null})),L=r((()=>{var e,n;const t=null==(e=_.value)?void 0:e.username;if(null==(n=_.value)?void 0:n.username)return j.find((e=>e[0]===t))})),U=(e,n,t)=>{x.chatlogs.push({id:x.chatlogs.length+1,from:n,to:t,data:e})},B=()=>{var e,n,t;const a=x.inputVal;if(!a)return;x.inputVal="";const o=null==(e=I.user)?void 0:e.sessionId,l=null==(n=_.value)?void 0:n.sessionId;if(U(a.trim(),o,l),"/time"===a)return void U((new Date).toLocaleString(),l,o);switch(null==(t=L.value)?void 0:t[1]){case"repeat":U("You said: "+a,l,o);break;case"reverse":U(a.split("").reverse().join(""),l,o)}};return i((()=>_.value),(e=>{e&&(async()=>{var e,n,t,a,o,l;x.chatlogs.length=0,x.chatlogs=_.value?[{id:1,from:null==(e=_.value)?void 0:e.sessionId,to:null==(n=I.user)?void 0:n.sessionId,data:(null==(t=L.value)?void 0:t[2])||`Hello, I'm ${null==(a=_.value)?void 0:a.username}.`},{id:2,from:null==(o=I.user)?void 0:o.sessionId,to:null==(l=_.value)?void 0:l.sessionId,data:"Hello!"}]:[]})()}),{immediate:!0}),u((()=>{S("space+r",(function(){const e=b.data[Math.floor(Math.random()*b.data.length)];return a.push("/app/"+e.sessionId),!1}))})),(n,t)=>{var a;const o=e;return c(),d("div",T,[f(_)?(c(),d("div",A,[v("h4",null,"To: "+p(null==(a=f(_))?void 0:a.username),1),v("ul",D,[h(g,{name:"show"},{default:m((()=>[(c(!0),d(y,null,k(f(x).chatlogs,(e=>(c(),d("li",{class:w(["chatPop",[e.from===f(P)?"justify-start":"justify-end"]]),key:e.id},[v("section",null,p(e.data),1)],2)))),128))])),_:1})]),h(o,{value:f(x).inputVal,"onUpdate:value":t[0]||(t[0]=e=>f(x).inputVal=e),placeholder:"Press enter to submit",onOnEnter:B},null,8,["value"])])):(c(),d("div",V,K))])}}}),[["__scopeId","data-v-a9a0a1a4"]]);export{L as default};
